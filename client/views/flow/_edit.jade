template(name='flow_edit')
  header
    .buttons
      button.editor
        i.entypo.line-graph
        | Editor
    a.logo
  div.main
    .split
      .main
        #flow
          svg(width='100%' height='100%')

            defs
              marker#head(orient='auto', viewBox="0 0 10 10" markerWidth='6', markerHeight='6', refX='2', refY='5')
                path(d="M 0 5 L 10 0 L 10 10 z", fill='#fff')
              marker#head-selected(orient='auto', viewBox="0 0 10 10" markerWidth='6', markerHeight='6', refX='2', refY='5')
                path(d="M 0 5 L 10 0 L 10 10 z", fill='#4aa8ff')

            each lines
              line.handle(x1=x1 y1=y1 x2=x2 y2=y2 stroke='#5b6d7e' stroke-width='20' stroke-opacity='0.0')
              line(x1=x1 y1=y1 x2=x2 y2=y2 stroke=color stroke-width='2' marker-start=marker)

          each steps
            +flow_edit_step

          each graphs
            +flow_edit_graph

template(name='flow_edit_step')
  div.step.collapsed(data-id=_id, style=itemStyle)
    i.entypo.cog
    span= title

template(name='flow_edit_graph')
  div.step.graph.collapsed(data-id=_id, style=itemStyle)
    i.entypo.line-graph
    span= title